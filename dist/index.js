import{useState as r,useMemo as t,useCallback as n,useEffect as e}from"react";function o(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(r)))return;var n=[],e=!0,o=!1,i=void 0;try{for(var c,u=r[Symbol.iterator]();!(e=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);e=!0);}catch(r){o=!0,i=r}finally{try{e||null==u.return||u.return()}finally{if(o)throw i}}return n}(r,t)||function(r,t){if(!r)return;if("string"==typeof r)return i(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}var c=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",n=Object.keys(r);return n.reduce((function(e,o,i){var c="".concat(e).concat(o,"=").concat(r[o]);return i<n.length-1&&(c+=t),c}),"")},u=function(i){var u=i.windowOptions,a=void 0===u?{}:u,l=i.onSuccess,f=i.onError,s=i.clientId,p=i.redirectUri,d=i.scope,v=o(r(null),2),h=v[0],y=v[1],b=t((function(){return c({client_id:s,scope:d,redirect_uri:p})}),[s,d,p]),w="https://github.com/login/oauth/authorize?".concat(b),m=n((function(){var r=window.open(w,"github-auth-popup",c(a,","));y(r)}),[w]),g=n((function(){h&&!h.closed&&h.close(),y(null)}),[h]);return e((function(){if(h){var r=window.setInterval((function(){try{h.closed&&(g(),f(new Error("Popup was closed.")));var r=h.location.href;if("about:blank"!==r&&r!==w){var t=h.location.search.replace(/^\?/,"").replace(/^\??\//,"").split("&").reduce((function(r,t){var n=o(t.split("="),2),e=n[0],i=n[1];return r[e]=i,r}),{});t.error?(g(),f(new Error(t.error_description))):(y(null),l(t))}}catch(r){}}),500);return function(){return window.clearInterval(r)}}}),[h]),[function(){return m()}]};export{u as useGithubAuth};
//# sourceMappingURL=index.js.map
